(this.webpackJsonpplayground=this.webpackJsonpplayground||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(4),u=n(6),c=n(3),l=n(0),i=n.n(l),s=n(16),p=n.n(s),m=n(5),f=n.n(m),d=null,b={getAll:function(){return f.a.get("/api/notes").then((function(e){return e.data}))},create:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:d}},e.next=3,f.a.post("/api/notes",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return f.a.put("".concat("/api/notes","/").concat(e),t).then((function(e){return e.data}))},setToken:function(e){d="bearer ".concat(e)}},g={login:function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=(n(40),function(e){var t=e.note,n=e.toggleImportance,a=t.important?"make not important":"make important";return i.a.createElement("li",{className:"note"},t.content,i.a.createElement("button",{onClick:n},a))}),h=function(e){var t=e.message;return null===t?null:i.a.createElement("div",{className:"error"},t)},E=function(e){var t=Object(l.useState)([]),n=Object(c.a)(t,2),a=n[0],s=n[1],p=Object(l.useState)("a new note"),m=Object(c.a)(p,2),f=m[0],d=m[1],E=Object(l.useState)(!1),O=Object(c.a)(E,2),j=O[0],w=O[1],k=Object(l.useState)(null),S=Object(c.a)(k,2),y=S[0],x=S[1],N=Object(l.useState)(""),C=Object(c.a)(N,2),I=C[0],T=C[1],J=Object(l.useState)(""),A=Object(c.a)(J,2),D=A[0],U=A[1],z=Object(l.useState)(null),B=Object(c.a)(z,2),M=B[0],W=B[1];Object(l.useEffect)((function(){b.getAll().then((function(e){return s(e)}))}),[]),Object(l.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteappUser");if(e){var t=JSON.parse(e);W(t),b.setToken(t.token)}}),[]);var q=function(e){e.preventDefault(),console.log();var t={content:f,date:(new Date).toISOString(),important:Math.random()<.5};b.create(t).then((function(e){s(a.concat(e)),d("")}))},F=j?a:a.filter((function(e){return e.important})),G=function(e){d(e.target.value)},H=function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,g.login({username:I,password:D});case 4:n=e.sent,window.localStorage.setItem("loggedNoteappUser",JSON.stringify(n)),b.setToken(n.token),W(n),T(""),U(""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),x("Wrong credentials"),setTimeout((function(){x(null)}),5e3);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",null,i.a.createElement("h1",null,"Notes"),i.a.createElement(h,{message:y}),null===M?i.a.createElement("form",{onSubmit:H},i.a.createElement("div",null,"username",i.a.createElement("input",{type:"text",value:I,onChange:function(e){var t=e.target;return T(t.value)}})),i.a.createElement("div",null,"password",i.a.createElement("input",{type:"password",value:D,onChange:function(e){var t=e.target;return U(t.value)}})),i.a.createElement("button",{type:"submit"},"login")):i.a.createElement("div",null,i.a.createElement("p",null,M.name," logged-in ",i.a.createElement("button",{onClick:function(){window.localStorage.clear(),W(null)}},"log out")),i.a.createElement("form",{onSubmit:q},i.a.createElement("input",{value:f,onChange:G}),i.a.createElement("button",{type:"submit"},"submit"))),i.a.createElement("ul",null,F.map((function(e){return i.a.createElement(v,{key:e.id,note:e,toggleImportance:function(){return function(e){var t=a.find((function(t){return t.id===e})),n=Object(u.a)(Object(u.a)({},t),{},{important:!t.important});b.update(e,n).then((function(t){s(a.map((function(n){return n.id!==e?n:t})))})).catch((function(e){x("Note '".concat(t.content,"' was already removed from the server")),setTimeout((function(){x(null)}),5e3)}))}(e.id)}})}))),i.a.createElement("button",{onClick:function(){w(!j)}},"show ",j?"important":"all"))};p.a.render(i.a.createElement(E,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.ad2b6b6d.chunk.js.map